<!DOCTYPE html>
<html>
<head>
  <title>justice</title>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>

  <style type="text/css">
    body {
      background-color: white;
      font-family: monospace;
      padding-bottom: 80px;
    }
    .main {
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      font-weight: 900;
      font-size: 60px;
      margin: 40px auto;
      text-align: center;
      display: block;
      padding: 10px;
      font-family: monospace;
    }

    pre {
      background-color: black;
      padding: 10px;
      border-radius: 5px;
      color: white;
      line-height: 1.4em;
    }
    p {
      font-weight: bold;
      margin-top: 4em;
    }
    span {
      text-align: center;
      display: block;
    }
  </style>



  <div class="main">
    <h1>justice.js</h1>
    <span style="padding-bottom: 2em;">A performance metric bar with a streaming FPS graph.</span>

    <span>
      <a href="https://github.com/okor/justice">github.com/okor/justice</a>
      | <a href="https://twitter.com/okor">@okor</a>
    </span>

<p>How to use</p>
<pre>
  &lt;script type=&quot;text/javascript&quot; src=&quot;justice.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    Justice.init();
  &lt;/script&gt;
</pre>

<p>With options</p>
<pre>
  &lt;script type=&quot;text/javascript&quot; src=&quot;justice.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    Justice.init({
      metrics: {
        pageLoad: { budget: 800 },
        domComplete: { budget: 600 },
        domInteractive: { budget: 400 },
        requests: { budget: 6 }
      },
      showFPS: true,
      chartType: 'spline'
    });
  &lt;/script&gt;
</pre>

  <p>Or use the bookmarklet</p>
  <a href="javascript:%22use%20strict%22;!function(){var%20e=%22.justice{position:fixed;bottom:0;left:0;right:0;background:black;padding:0%2010px%2010px%2010px;box-sizing:border-box;font-size:12px;font-family:monospace;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row%20wrap;-ms-flex-flow:row%20wrap;flex-flow:row%20wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;z-index:2147483647;-webkit-transition:400ms%20ease-in-out;transition:400ms%20ease-in-out}%40media%20(min-width:%201235px){.justice{padding-bottom:10px;}}.justice.closed{-webkit-transform:translateY(100%25);-ms-transform:translateY(100%25);transform:translateY(100%25)}.justice%20.justice-metric-wrap{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.justice%20.justice-metric{height:40px;display:inline-block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:10px%2010px%200%200}.justice%20.justice-metric.chart{width:300px}.justice%20.justice-title{text-transform:uppercase;padding:3px%200.5em%203px%203px;color:%23dfdfdf}.justice%20.justice-text{color:%23dfdfdf;font-weight:600}.justice%20.justice-text.pass{color:%23419ba3}.justice%20.justice-text.warn{color:%23d4ca3d}.justice%20.justice-text.fail{color:%23ce452d}.justice%20.justice-toggle{width:20px;height:20px;background-color:black;position:absolute;right:0;top:-20px;opacity:0.5;border-top-left-radius:50%25;-webkit-transition:400ms%20ease-in-out;transition:400ms%20ease-in-out}%40media%20only%20screen%20and%20(min-device-pixel-ratio:%201.1){.justice%20.justice-toggle{width:40px;height:40px;top:-40px;}}.justice%20.justice-toggle:after{content:'';position:absolute;width:50%25;height:50%25;border-radius:100%25;margin:5px;background-color:%23dfdfdf;-webkit-transition:400ms%20ease-in-out;transition:400ms%20ease-in-out}%40media%20only%20screen%20and%20(min-device-pixel-ratio:%201.1){.justice%20.justice-toggle:after{margin:10px;}}.justice.closed%20.justice-toggle{opacity:1}.justice.closed%20.justice-toggle:after{background-color:%23419ba3}%22,t=document.createElement(%22style%22);if(document.getElementsByTagName(%22head%22)[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else%20try{t.innerHTML=e}catch(i){t.innerText=e}}();var%20Justice=function(){function%20e(e){var%20t={},e=e||{};for(var%20i%20in%20Q)t[i]=Q[i];for(var%20i%20in%20e)t[i]=e[i];return%20t}function%20t(e,t,i){for(var%20n%20in%20e.metrics)t[n]=i[n]}function%20i(){return%20R.loadEventStart-R.navigationStart}function%20n(){return%20R.domComplete-R.domLoading}function%20o(){return%20R.domInteractive-R.domLoading}function%20a(){var%20e=0;return%20window.chrome%26%26window.chrome.loadTimes%3F(e=1e3*window.chrome.loadTimes().firstPaintTime,e-=1e3*window.chrome.loadTimes().startLoadTime,e.toFixed(0)):%22number%22==typeof%20window.performance.timing.msFirstPaint%3F(e=window.performance.timing.msFirstPaint,e-=window.performance.timing.navigationStart,e.toFixed(0)):%22¯\\_(ツ)_/¯%22}function%20r(){return%20performance.getEntries%3Fperformance.getEntries().length:%22¯\\_(ツ)_/¯%22}function%20l(){return%20R.responseStart-R.connectEnd}function%20s(e){if(D){var%20t=(e-D)/1e3,i=1/t,n=Math.floor(i%3E60%3F60:i);W=n,G.push([n,n]),G.length%3E_%26%26G.shift(),D=e}else%20D=e}function%20c(e,t){var%20i=%22%22;return%20i=e%3Et%3F%22fail%22:e%3Et*U.warnThreshold%3F%22warn%22:%22pass%22}function%20d(e,t,i){var%20n=t.collector(),o=c(n,i);return['%3Cdiv%20class=%22'+B+'-metric%22%20id=%22'+t.id+'%22%3E','%3Cspan%20class=%22'+B+'-title%22%3E'+t.label+%22:%20%3C/span%3E%22,'%3Cspan%20class=%22'+B+%22-text%20%22+o+'%22%3E'+n+t.unitLabel+%22%3C/span%3E%22,%22%3C/div%3E%22].join(%22%22)}function%20u(e){var%20t=[];for(var%20i%20in%20X){var%20n=d(i,X[i],U.metrics[i].budget);t.push(n)}return'%3Cdiv%20id=%22'+B+'-text-metrics%22%20class=%22'+B+'-metric-wrap%22%3E'+t.join(%22%22)+%22%3C/div%3E%22}function%20f(){var%20e=U.showFPS%3F['%3Cdiv%20class=%22'+B+'-metric%20chart%22%3E','%3Cspan%20class=%22'+B+'-title%22%3EFPS:%20%3C/span%3E','%3Ccanvas%20id=%22'+B+'-fps%22%20class=%22'+B+'-canvas%22%20height=%22'+N+'%22%20width=%22'+q+'%22%3E%3C/canvas%3E',%22%3C/div%3E%22].join(%22%22):%22%22;return%20e}function%20m(e,t){e.clearRect(0,0,t.width,t.height),w(e),p(e),g(e)}function%20p(e){var%20t=10;e.font=%22600%20%22+t+%22px%20sans-serif%22,e.fillStyle=E,e.fillText(0,0,N),e.fillStyle=C,e.fillText(30,0,N/2+t/2),e.fillStyle=I,e.fillText(60,0,0+t)}function%20g(e){var%20t=e.createLinearGradient(0,N,0,0);t.addColorStop(0,E),t.addColorStop(.25,E),t.addColorStop(.5,C),t.addColorStop(1,I),e.strokeStyle=t,e.fillStyle=t}function%20w(e){for(var%20t=0;3%3Et;t++){var%20i=N/2*t+.5-(2===t%3F1:0);e.beginPath(),e.moveTo(.5+M,i),e.lineTo(q+.5,i),e.lineWidth=1,e.strokeStyle=P,e.stroke()}}function%20b(e){var%20t=null;return%22spline%22===e%3Ft=h:%22dots%22===e%26%26(t=x),t}function%20x(e,t,i){m(e,t);for(var%20n=0;n%3Ci.length;n++){var%20o=(60-i[n][1])*z;e.fillRect(i.length-n+M,o,1.5,1.5)}}function%20h(e,t,i){m(e,t),e.beginPath();var%20n=i.length%3E0%3Fi[i.length]:0;e.moveTo(0,n);for(var%20o=0;o%3Ci.length;o++){var%20a=0===o%3F0:o,r=(60-i[o][1])*z;e.lineTo(i.length-a+M,r)}e.lineWidth=1,e.stroke()}function%20v(){K=document.getElementById(B+%22-fps%22),O=K.getContext(%222d%22)}function%20y(){var%20e=S();Y=document.createElement(%22div%22),Y.id=B,Y.classList.add(B),Y.classList.add(e),document.body.appendChild(Y),Y=document.getElementById(B),Y.innerHTML=['%3Cdiv%20id=%22'+B+'-toggle%22%20class=%22'+B+'-toggle%22%3E%3C/div%3E',u(),f()].join(%22%22),U.showFPS%26%26v(),k()}function%20j(){var%20e=u(X),t=document.getElementById(B+%22-text-metrics%22);t.innerHTML=e}function%20k(){document.getElementById(B+%22-toggle%22).onclick=function(){var%20e=document.getElementById(B);e.className.match(%22%20closed%22)%3F(e.className=e.className.replace(%22%20closed%22,%22%22),T(%22open%22)):(e.className+=%22%20closed%22,T(%22closed%22))}}function%20T(e){window.localStorage%26%26window.localStorage.setItem(B+%22-state%22,e)}function%20S(){return%20window.localStorage%3Fwindow.localStorage.getItem(B+%22-state%22)||%22open%22:void%200}function%20L(e){J++,U.showFPS%26%26(s(e),A(O,K,G)),null===H%3FH=e:e-H%3E3e3%26%26(H=e,j()),window.requestAnimationFrame(L)}function%20F(i){R=window.performance.timing,U=e(i),t(U,X,V),y(),A=b(U.chartType),window.requestAnimationFrame(L)}var%20P=%22rgb(48,%2048,%2048)%22,E=%22rgb(206,%2069,%2045)%22,C=%22rgb(212,%20202,%2061)%22,I=%22rgb(65,%20155,%20163)%22,B=%22justice%22,q=300,N=40,z=N/60,M=20,_=q-M,H=0,J=0,R=null,Y=null,A=null,W=0,G=[],D=null,K=null,O=null,Q={metrics:{TTFB:{budget:200},domInteractive:{budget:250},domComplete:{budget:800},firstPaint:{budget:1e3},pageLoad:{budget:2e3},requests:{budget:6}},%22interface%22:{position:%22fixed%22,placement:%22bottom%22},warnThreshold:.8,chartType:%22spline%22,showFPS:!0},U={},V={pageLoad:{id:B+%22-load%22,label:%22Load%22,unitLabel:%22ms%22,collector:i},firstPaint:{id:B+%22-paint%22,label:%22Paint%22,unitLabel:%22ms%22,collector:a},TTFB:{id:B+%22-ttfb%22,label:%22TTFB%22,unitLabel:%22ms%22,collector:l},domComplete:{id:B+%22-complete%22,label:%22Complete%22,unitLabel:%22ms%22,collector:n},domInteractive:{id:B+%22-interactive%22,label:%22Interactive%22,unitLabel:%22ms%22,collector:o},requests:{id:B+%22-requests%22,label:%22Requests%22,unitLabel:%22%22,collector:r}},X={};return{init:function(e){%22performance%22in%20window%26%26%22timing%22in%20window.performance%3F%22complete%22===document.readyState%3FF(e,%22already%20loaded%22):window.onload=function(){F(e)}:console.log(%22Justice:%20performance%20api%20not%20supported%20in%20this%20browser,%20initialization%20stopped.%22)}}}();Justice.init();">Justice.js</a>



  </div>

  <script type="text/javascript" src="justice.min.js"></script>

  <script type="text/javascript" src="https://rawgit.com/okor/justice/master/build/justice.min.js" ></script>

  <!-- loading jquery to simulate real world, post load, ajax requests -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript">
    Justice.init({
      metrics: {
        pageLoad: { budget: 800 },
        domComplete: { budget: 600 },
        domInteractive: { budget: 400 },
        requests: { budget: 6 }
      },
      showFPS: true,
      chartType: 'spline'
    });
  </script>


  <script type="text/javascript">
    // simulating some ajax requests that might occur on a real site
    $(function() {

      function someAJAX() {
        $.ajax({
          url: 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.js',
          dataType: "script"
        });
      }

      someAJAX();
      setTimeout(someAJAX, 2000);
      setTimeout(someAJAX, 4000)
    })
  </script>

  <script type="text/javascript">
    if (!window.performance) alert("This browser does not support the performance timing API. Thus, Justice can't be used here. Sorry.")
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-7234461-11', 'auto');
    ga('send', 'pageview');
  
  </script>

</body>
</html>
