<!DOCTYPE html>
<html>
<head>
  <title>justice</title>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>

  <style type="text/css">
    body {
      background-color: white;
      font-family: monospace;
      padding-bottom: 80px;
    }
    .main {
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      font-weight: 900;
      font-size: 60px;
      margin: 40px auto;
      text-align: center;
      display: block;
      padding: 10px;
      font-family: monospace;
    }

    pre {
      background-color: black;
      padding: 10px;
      border-radius: 5px;
      color: white;
      line-height: 1.4em;
    }
    p {
      font-weight: bold;
      margin-top: 4em;
    }
    span {
      text-align: center;
      display: block;
    }
  </style>



  <div class="main">
    <h1>justice.js</h1>
    <span style="padding-bottom: 2em;">A performance metric bar with a streaming FPS graph.</span>

    <span>
      <a href="https://github.com/okor/justice">github.com/okor/justice</a>
      | <a href="https://twitter.com/okor">@okor</a>
    </span>

<p>How to use</p>
<pre>
  &lt;script type=&quot;text/javascript&quot; src=&quot;justice.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    Justice.init();
  &lt;/script&gt;
</pre>

<p>With options</p>
<pre>
  &lt;script type=&quot;text/javascript&quot; src=&quot;justice.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
    Justice.init({
      metrics: {
        pageLoad: { budget: 800 },
        domComplete: { budget: 600 },
        domInteractive: { budget: 400 },
        requests: { budget: 6 }
      },
      showFPS: true,
      chartType: 'spline'
    });
  &lt;/script&gt;
</pre>
  </div>
  
  <p>Use a bookmarklet: <a href="javascript:%22use%20strict%22;!function(){var%20e=%22.justice%20{\n%20%20position:%20fixed;\n%20%20bottom:%200;\n%20%20left:%200;\n%20%20right:%200;\n%20%20background:%20black;\n%20%20padding:%200%2010px%2010px%2010px;\n%20%20box-sizing:%20border-box;\n%20%20font-size:%2012px;\n%20%20font-family:%20monospace;\n%20%20display:%20flex;\n%20%20flex-flow:%20row%20wrap;\n%20%20justify-content:%20space-between;\n%20%20z-index:%202147483647;\n%20%20-webkit-transition:%20400ms%20ease-in-out;\n%20%20-moz-transition:%20400ms%20ease-in-out;\n%20%20-ms-transition:%20400ms%20ease-in-out;\n%20%20-o-transition:%20400ms%20ease-in-out;\n%20%20transition:%20400ms%20ease-in-out;%20}\n%20%20%40media%20(min-width:%201235px)%20{\n%20%20%20%20.justice%20{\n%20%20%20%20%20%20padding-bottom:%2010px;%20}%20}\n%20%20.justice.closed%20{\n%20%20%20%20-webkit-transform:%20translateY(100%25);\n%20%20%20%20-moz-transform:%20translateY(100%25);\n%20%20%20%20-ms-transform:%20translateY(100%25);\n%20%20%20%20-o-transform:%20translateY(100%25);\n%20%20%20%20transform:%20translateY(100%25);%20}\n%20%20.justice%20.justice-metric-wrap%20{\n%20%20%20%20display:%20flex;\n%20%20%20%20flex-flow:%20wrap;\n%20%20%20%20justify-content:%20space-between;%20}\n%20%20.justice%20.justice-metric%20{\n%20%20%20%20height:%2040px;\n%20%20%20%20display:%20inline-block;\n%20%20%20%20display:%20flex;\n%20%20%20%20align-items:%20center;\n%20%20%20%20margin:%2010px%2010px%200%200;%20}\n%20%20%20%20.justice%20.justice-metric.chart%20{\n%20%20%20%20%20%20width:%20300px;%20}\n%20%20.justice%20.justice-title%20{\n%20%20%20%20text-transform:%20uppercase;\n%20%20%20%20padding:%203px%200.5em%203px%203px;\n%20%20%20%20color:%20%23dfdfdf;%20}\n%20%20.justice%20.justice-text%20{\n%20%20%20%20color:%20%23dfdfdf;\n%20%20%20%20font-weight:%20600;%20}\n%20%20.justice%20.justice-text.pass%20{\n%20%20%20%20color:%20%23419ba3;%20}\n%20%20.justice%20.justice-text.warn%20{\n%20%20%20%20color:%20%23d4ca3d;%20}\n%20%20.justice%20.justice-text.fail%20{\n%20%20%20%20color:%20%23ce452d;%20}\n%20%20.justice%20.justice-toggle%20{\n%20%20%20%20width:%2020px;\n%20%20%20%20height:%2020px;\n%20%20%20%20background-color:%20black;\n%20%20%20%20position:%20absolute;\n%20%20%20%20right:%200;\n%20%20%20%20top:%20-20px;\n%20%20%20%20opacity:%200.5;\n%20%20%20%20border-top-left-radius:%2050%25;\n%20%20%20%20-webkit-transition:%20400ms%20ease-in-out;\n%20%20%20%20-moz-transition:%20400ms%20ease-in-out;\n%20%20%20%20-ms-transition:%20400ms%20ease-in-out;\n%20%20%20%20-o-transition:%20400ms%20ease-in-out;\n%20%20%20%20transition:%20400ms%20ease-in-out;%20}\n%20%20%20%20%40media%20only%20screen%20and%20(-webkit-min-device-pixel-ratio:%201.1),%20only%20screen%20and%20(min--moz-device-pixel-ratio:%201.1),%20only%20screen%20and%20(-o-min-device-pixel-ratio:%201.1%20/%201),%20only%20screen%20and%20(min-device-pixel-ratio:%201.1)%20{\n%20%20%20%20%20%20.justice%20.justice-toggle%20{\n%20%20%20%20%20%20%20%20width:%2040px;\n%20%20%20%20%20%20%20%20height:%2040px;\n%20%20%20%20%20%20%20%20top:%20-40px;%20}%20}\n%20%20%20%20.justice%20.justice-toggle:after%20{\n%20%20%20%20%20%20content:%20'';\n%20%20%20%20%20%20position:%20absolute;\n%20%20%20%20%20%20width:%2050%25;\n%20%20%20%20%20%20height:%2050%25;\n%20%20%20%20%20%20border-radius:%20100%25;\n%20%20%20%20%20%20margin:%205px;\n%20%20%20%20%20%20background-color:%20%23dfdfdf;\n%20%20%20%20%20%20-webkit-transition:%20400ms%20ease-in-out;\n%20%20%20%20%20%20-moz-transition:%20400ms%20ease-in-out;\n%20%20%20%20%20%20-ms-transition:%20400ms%20ease-in-out;\n%20%20%20%20%20%20-o-transition:%20400ms%20ease-in-out;\n%20%20%20%20%20%20transition:%20400ms%20ease-in-out;%20}\n%20%20%20%20%20%20%40media%20only%20screen%20and%20(-webkit-min-device-pixel-ratio:%201.1),%20only%20screen%20and%20(min--moz-device-pixel-ratio:%201.1),%20only%20screen%20and%20(-o-min-device-pixel-ratio:%201.1%20/%201),%20only%20screen%20and%20(min-device-pixel-ratio:%201.1)%20{\n%20%20%20%20%20%20%20%20.justice%20.justice-toggle:after%20{\n%20%20%20%20%20%20%20%20%20%20margin:%2010px;%20}%20}\n%20%20.justice.closed%20.justice-toggle%20{\n%20%20%20%20opacity:%201;%20}\n%20%20%20%20.justice.closed%20.justice-toggle:after%20{\n%20%20%20%20%20%20background-color:%20%23419ba3;%20}\n\n/*%23%20sourceMappingURL=justice.css.map%20*/\n%22,n=document.createElement(%22style%22);if(document.getElementsByTagName(%22head%22)[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else%20try{n.innerHTML=e}catch(t){n.innerText=e}}();var%20Justice=function(){function%20e(e){var%20n={},e=e||{};for(var%20t%20in%20K)n[t]=K[t];for(var%20t%20in%20e)n[t]=e[t];return%20n}function%20n(e,n,t){for(var%20i%20in%20e.metrics)n[i]=t[i]}function%20t(){return%20R.loadEventStart-R.navigationStart}function%20i(){return%20R.domComplete-R.domLoading}function%20o(){return%20R.domInteractive-R.domLoading}function%20a(){return%20performance.getEntries%3Fperformance.getEntries().length:%22%3F%22}function%20s(e){if(G){var%20n=(e-G)/1e3,t=1/n,i=Math.floor(t%3E60%3F60:t);J=i,W.push([i,i]),W.length%3EM%26%26W.shift(),G=e}else%20G=e}function%20r(e,n){var%20t=%22%22;return%20t=e%3En%3F%22fail%22:e%3En/2%3F%22warn%22:%22pass%22}function%20l(e,n,t){var%20i=n.collector(),o=r(i,t);return['%3Cdiv%20class=%22'+z+'-metric%22%20id=%22'+n.id+'%22%3E','%3Cspan%20class=%22'+z+'-title%22%3E'+n.label+%22:%20%3C/span%3E%22,'%3Cspan%20class=%22'+z+%22-text%20%22+o+'%22%3E'+i+n.unitLabel+%22%3C/span%3E%22,%22%3C/div%3E%22].join(%22%22)}function%20c(){var%20e=[];for(var%20n%20in%20V){var%20t=l(n,V[n],O.metrics[n].budget);e.push(t)}return'%3Cdiv%20id=%22'+z+'-text-metrics%22%20class=%22'+z+'-metric-wrap%22%3E'+e.join(%22%22)+%22%3C/div%3E%22}function%20d(){var%20e=O.showFPS%3F['%3Cdiv%20class=%22'+z+'-metric%20chart%22%3E','%3Cspan%20class=%22'+z+'-title%22%3EFPS:%20%3C/span%3E','%3Ccanvas%20id=%22'+z+'-fps%22%20class=%22'+z+'-canvas%22%20height=%22'+P+'%22%20width=%22'+F+'%22%3E%3C/canvas%3E',%22%3C/div%3E%22].join(%22%22):%22%22;return%20e}function%20u(e,n){e.clearRect(0,0,n.width,n.height),f(e),m(e),p(e)}function%20m(e){var%20n=10;e.font=%22600%20%22+n+%22px%20sans-serif%22,e.fillStyle=C,e.fillText(0,0,P),e.fillStyle=I,e.fillText(30,0,P/2+n/2),e.fillStyle=E,e.fillText(60,0,0+n)}function%20p(e){var%20n=e.createLinearGradient(0,P,0,0);n.addColorStop(0,C),n.addColorStop(.25,C),n.addColorStop(.5,I),n.addColorStop(1,E),e.strokeStyle=n,e.fillStyle=n}function%20f(e){for(var%20n=0;3%3En;n++){var%20t=P/2*n+.5-(2===n%3F1:0);e.beginPath(),e.moveTo(.5+B,t),e.lineTo(F+.5,t),e.lineWidth=1,e.strokeStyle=T,e.stroke()}}function%20g(e){var%20n=null;return%22spline%22===e%3Fn=h:%22dots%22===e%26%26(n=v),n}function%20v(e,n,t){u(e,n);for(var%20i=0;i%3Ct.length;i++){var%20o=(60-t[i][1])*q;e.fillRect(t.length-i+B,o,1.5,1.5)}}function%20h(e,n,t){u(e,n),e.beginPath();var%20i=t.length%3E0%3Ft[t.length]:0;e.moveTo(0,i);for(var%20o=0;o%3Ct.length;o++){var%20a=0===o%3F0:o,s=(60-t[o][1])*q;e.lineTo(t.length-a+B,s)}e.lineWidth=1,e.stroke()}function%20b(){U=document.getElementById(z+%22-fps%22),D=U.getContext(%222d%22)}function%20x(){var%20e=S();H=document.createElement(%22div%22),H.id=z,H.classList.add(z),H.classList.add(e),document.body.appendChild(H),H=document.getElementById(z),H.innerHTML=['%3Cdiv%20id=%22'+z+'-toggle%22%20class=%22'+z+'-toggle%22%3E%3C/div%3E',c(),d()].join(%22%22),O.showFPS%26%26b(),y()}function%20w(){var%20e=c(V),n=document.getElementById(z+%22-text-metrics%22);n.innerHTML=e}function%20y(){document.getElementById(z+%22-toggle%22).onclick=function(){var%20e=document.getElementById(z);e.className.match(%22%20closed%22)%3F(e.className=e.className.replace(%22%20closed%22,%22%22),j(%22open%22)):(e.className+=%22%20closed%22,j(%22closed%22))}}function%20j(e){window.localStorage%26%26window.localStorage.setItem(z+%22-state%22,e)}function%20S(){return%20window.localStorage%3Fwindow.localStorage.getItem(z+%22-state%22)||%22open%22:void%200}function%20k(e){Y++,O.showFPS%26%26(s(e),A(D,U,W)),null===N%3FN=e:e-N%3E3e3%26%26(N=e,w()),window.requestAnimationFrame(k)}function%20L(t){O=e(t),n(O,V,Q),x(),A=g(O.chartType),window.requestAnimationFrame(k)}var%20T=%22rgb(48,%2048,%2048)%22,C=%22rgb(206,%2069,%2045)%22,I=%22rgb(212,%20202,%2061)%22,E=%22rgb(65,%20155,%20163)%22,z=%22justice%22,F=300,P=40,q=P/60,B=20,M=F-B,N=0,Y=0,R=window.performance.timing,H=null,A=null,J=0,W=[],G=null,U=null,D=null,K={metrics:{pageLoad:{budget:1e3},domComplete:{budget:800},domInteractive:{budget:200},requests:{budget:20}},%22interface%22:{position:%22fixed%22,placement:%22bottom%22},chartType:%22spline%22,showFPS:!0},O={},Q={pageLoad:{id:z+%22-load%22,label:%22Load%22,unitLabel:%22ms%22,collector:t},domComplete:{id:z+%22-complete%22,label:%22Complete%22,unitLabel:%22ms%22,collector:i},domInteractive:{id:z+%22-interactive%22,label:%22Interactive%22,unitLabel:%22ms%22,collector:o},requests:{id:z+%22-requests%22,label:%22Requests%22,unitLabel:%22%22,collector:a}},V={};return{init:function(e){window.performance%26%26window.performance.timing%26%26(%22complete%22===document.readyState%3FL(e,%22already%20loaded%22):window.onload=function(){L(e)})}}}();Justice.init({metrics:{pageLoad:{budget:3250},domComplete:{budget:3e3},domInteractive:{budget:1500},requests:{budget:75}},showFPS:!0,chartType:%22spline%22});">Justice.js</a></p>

  <script type="text/javascript" src="justice.min.js"></script>

  <!-- loading jquery to simulate real world, post load, ajax requests -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript">
    Justice.init({
      metrics: {
        pageLoad: { budget: 800 },
        domComplete: { budget: 600 },
        domInteractive: { budget: 400 },
        requests: { budget: 6 }
      },
      showFPS: true,
      chartType: 'spline'
    });
  </script>


  <script type="text/javascript">
    // simulating some ajax requests that might occur on a real site
    $(function() {

      function someAJAX() {
        $.ajax({
          url: 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.js',
          dataType: "script"
        });
      }

      someAJAX();
      setTimeout(someAJAX, 2000);
      setTimeout(someAJAX, 4000)
    })
  </script>

</body>
</html>
